<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bnet Clone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-messaging-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
<link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

</head>

<body  id="deneme" >

<div  v-if="token ? false : true"  ref="login">
    <h2>Login</h2>
    <input type="text" v-model="username" placeholder="Username" />
    <input type="password" v-model="password"  placeholder="Password" />
    <input type="checkbox" v-model="rememberMe" > 
    Remember me
    </input>
    <button @click="login()">Login</button>
</div>

<!-- Register Bölümü -->
<div v-if="token ? false : true" ref="register">
    <h2>Register</h2>
    <input type="text" v-model="register.username" placeholder="Username" />
    <input type="email" v-model="register.email" placeholder="Email" />
    <input type="password" v-model="register.password"   placeholder="Password (6 Karekter)" />
    <button @click="register()">Register</button>
    <div>{{registerMessage}}</div>
</div>

<div   v-if="token ? true : false"  id="app" class="app">
 <div class="header">
  <div class="toogleUserSvg usersToggleBtn">
    <svg xmlns="http://www.w3.org/2000/svg" stroke-width="1.5"  @click="toggleConversationArea()"   xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 32 32" enable-background="new 0 0 32 32" id="Filled_Line" version="1.1" xml:space="preserve"><circle cx="5" cy="6" fill="none" id="XMLID_528_" r="1" stroke="#B83B5E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/><circle cx="5" cy="16" fill="none" id="XMLID_441_" r="1" stroke="#F08A5D" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/><circle cx="5" cy="26" fill="none" id="XMLID_442_" r="1" stroke="#F9ED69" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/><line fill="none" id="XMLID_443_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" x1="10" x2="28" y1="6" y2="6"/><line fill="none" id="XMLID_444_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" x1="10" x2="28" y1="16" y2="16"/><line fill="none" id="XMLID_445_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" x1="10" x2="28" y1="26" y2="26"/></svg>
  </div>
  <div   class="logo">
   <svg viewBox="0 0 513 513" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path d="M256.025.05C117.67-2.678 3.184 107.038.025 245.383a240.703 240.703 0 0085.333 182.613v73.387c0 5.891 4.776 10.667 10.667 10.667a10.67 10.67 0 005.653-1.621l59.456-37.141a264.142 264.142 0 0094.891 17.429c138.355 2.728 252.841-106.988 256-245.333C508.866 107.038 394.38-2.678 256.025.05z" />
    <path d="M330.518 131.099l-213.825 130.08c-7.387 4.494-5.74 15.711 2.656 17.97l72.009 19.374a9.88 9.88 0 007.703-1.094l32.882-20.003-10.113 37.136a9.88 9.88 0 001.083 7.704l38.561 63.826c4.488 7.427 15.726 5.936 18.003-2.425l65.764-241.49c2.337-8.582-7.092-15.72-14.723-11.078zM266.44 356.177l-24.415-40.411 15.544-57.074c2.336-8.581-7.093-15.719-14.723-11.078l-50.536 30.744-45.592-12.266L319.616 160.91 266.44 356.177z" fill="#fff" /></svg>
   
  </div>
  <div class="lego" >
    <p style="margin-left: 10px;width: 150px;" >Bnet Clone</p>
    <p  v-if="this.statusText" style="margin-left: 10px;color:orange;font-size: 12px;" id="connectionStatus">{{this.statusText}}</p>
  </div>
 
  
  <div class="search-bar">
  </div>
  <div class="user-settings">
    <div class="toogleUserSvg">
      <svg  @click="logout()"  ng- xmlns="http://www.w3.org/2000/svg"  stroke-width="1.5"  viewBox="0 0 24 24" fill="none">
        <path d="M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </div>
   
   <div class="dark-light">
    <svg @click="changeTheme()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
     <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" /></svg>
   </div>
   <div id="settings" class="settings">
    <svg @click="openSettings()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="3" />
      <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" /></svg>
   </div>
   <div  v-if="this.friendRequests.length > 0" style="position: relative" class="notifications">

     <svg  @click="openFriendRequests()"  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none">
      <path opacity="0.5" d="M22 10.5V12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2H13.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
      <circle cx="19" cy="5" r="3" stroke="#1C274C" stroke-width="1.5"/>
      <path d="M7 14H16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M7 17.5H13" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <span class="notification-badge" >{{this.friendRequests.length}}</span>
    </div>
  
   <img class="user-profile"  :src="myuser.picture" alt="" class="account-profile" alt="">
   <div>
    <p  style="margin: 0;" >{{myuser.name}}</p>
    <p style="margin: 0;" >#{{myuser.sub}}</p>
   </div>
  
  </div>
 </div>
 <div class="wrapper">
  <div id="conversation-area" ref="conversationArea" class="conversation-area">
    <div  v-for="(user, index) in users" :key="user.id"   @click="selectUser(user.id,user.userName)" :class="['msg', 
    onlineUsers_data.includes(user.id.toString()) ? 'online' : '', 
    user.id === selectedUserId ? 'active' : '']">
        <img class="msg-profile" :src="'https://randomuser.me/api/portraits/men/' + user.id + '.jpg'"  alt="" />
        <div class="msg-detail">
            <div class="msg-username">{{user.userName}}</div>
            <div class="msg-content">
            <span class="msg-message">{{user.lastMessage ? user.lastMessage.content.slice(0, 20) : ''}}</span>
            <span class="msg-date">{{user.lastMessage ? this.timeAgo(user.lastMessage.timestamp) : ''}}</span>
            </div>
        </div>
    </div>
   <button @click="sendFriendRequestBtn()" class="add"></button>
   <div class="overlay"></div>
  </div>
  <div id="chat"  class="chat-area">
   <div class="chat-area-header">
    <div  id="chat-area-title" class="chat-area-title"></div>
    <div  ref="ReceiveWrites" style="color: brown;display:none;">yazıyor</div>
   </div>
   <div id="messages"  ref="msgDiv"  class="chat-area-main">
      <p v-if="!messages.length"   style="text-align:center;color:orange">Mesajlar uçtan uca şifresizdir. Bende dahil olmak üzere bu sohbetin dışında bulunan herkes mesajları okuyabilir.</p>
      <p v-if="messages.length && endMessageVariable"  style="text-align:center">Daha fazla Mesaj Yok</p>
      <div v-for="msg in messages"   :class="['chat-msg', msg.senderId  == myuser.sub ? 'owner' : '']"> 
        <div class="chat-msg-profile">
          <img class="chat-msg-img"  :src="'https://randomuser.me/api/portraits/men/' + msg.senderId + '.jpg'" alt="" />
          <div class="chat-msg-date">Message Time {{new Date(msg.timestamp).toLocaleTimeString()}}</div>
        </div>
        <div class="chat-msg-content">
          <div class="chat-msg-text">{{msg.content}}</div>
        </div>
      </div>
   </div>
   <div   v-if="selectedUserId === null ? false : true" class="chat-area-footer">
    <input type="text" v-on:keyup.enter="sendMessage()" @input="onChangeMsg()" id="message"  v-model="messageText"  placeholder="Bir Mesaj Giriniz" />
    <svg xmlns="http://www.w3.org/2000/svg" @click="sendMessage()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-thumbs-up">
     <path d="M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3zM7 22H4a2 2 0 01-2-2v-7a2 2 0 012-2h3" /></svg>
   </div>
  </div>
  <div  v-if="settingsBoxVis" class="detail-area">
   <div class="detail-area-header">
    <div class="msg-profile group">
      <img src="" alt=""> 
    </div>
    <div class="detail-title"></div>
    <div class="detail-subtitle">Burak Sağlık</div>
   </div>
   <div class="detail-changes">
    <!-- <input type="text" placeholder="Search in Conversation"> -->
    <div class="detail-change">
     Renk Değiştir
     <div class="colors">
      <div class="color blue" @click="changeColor('blue')" data-color="blue"></div>
      <div class="color purple" @click="changeColor('purple')" data-color="purple"></div>
      <div class="color green" @click="changeColor('green')" data-color="green"></div>
      <div class="color orange" @click="changeColor('orange')" data-color="orange"></div>
     </div>
    </div>
   </div>
   </a>
  </div>
 </div>
</div>

</body>

</html>

<script src="common.js"></script>
<script src="app.js"></script>
<script  src="./script.js"></script>

